<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog Search</title>
    <link rel="shortcut icon" href="../images/png-logo.png" type="image/x-icon">
     <!-- font3 -->
     <link rel="preconnect" href="https://fonts.googleapis.com">
     <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
     <link href="https://fonts.googleapis.com/css2?family=Berkshire+Swash&display=swap" rel="stylesheet">


    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- <link rel="stylesheet" href="../../styles.css"> -->

    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background: #ffffff;
            background-image: url(../images/background-Image.jpg) !important;
   background-repeat: no-repeat;
    background-size: cover;
        }

.main-search{
    height: 100%;
    padding: 7px;
    padding-top: 7em;
}

        
/* Navbar */
.navbar{
    background-color: white !important;
    position: fixed;
    top: 0%;
    left: 0%;
    right: 0;
    z-index: 999;
    box-shadow: rgba(0, 0, 0, 0.15) 1.95px 1.95px 2.6px;
}


.logoImg{
    width: 65px;
    height: 65px;
}

.nav-link{
    font-weight: bold;
    font-family: "Chakra Petch", sans-serif;
    font-style: normal;
    position: relative;
    display: inline-block;
    text-decoration: none;
    padding-bottom: 5px;
  
}


#add , #adduser{
    display: none;
}



.abc::after {
    content: "";
    position: absolute;
    left: 0;
    bottom: 0;
    width: 0;
    height: 2px;
    background: #ff5733; /* Tumhari pasand ka color */
    transition: width 0.4s ease-in-out;
  }
  
  .abc:hover::after {
    width: 100%;
  }

.user {
    color: rgb(0, 0, 0);
    list-style-type: none;
    font-size: 1.8em;
    padding-right: 1em;

}

.nav-item{
    list-style-type: none;
}
.nav-link:hover{
    
    color: #548350 !important; 

}

.input-group{
    width: 300px !important;
    margin-right: 3em;
    margin-top: 0.8em;

}

#add , #adduser{
    display: none;
}


.mag-glass{
    padding:5px 7px !important ;
}

.user:hover{
    color: #548350 !important; 
    background-color: #98989800 !important;
    /* box-shadow: rgba(0, 0, 0, 0.47) 0px 5px 15px; */
}

.btn{
    font-family: "Chakra Petch", sans-serif;
    font-style: normal;
}

#log{
    display: none;
}

@media (max-width:340px){
    .input-group{
        width: 260px !important;
    }
}

/* input */
        .custom-search-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            background: white;
            padding: 15px;
            box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 1px 3px 1px;
            border-radius: 35px;
            margin: 20px auto;
            width: 80%;
            max-width: 600px;
        }
        .glass-div {
            display: flex;
            align-items: center;
            width: 100%;
            background: white;
            border-radius: 3px;
        }
        .custom-search-bar {
            padding: 10px;
            font-size: 16px;
            width: 100%;
            border: none;
            outline: none;
        }
        .blog-container {
            margin-top: 20px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
        }
        .info-container {
            width: 360px;
            background: white;
            border-radius: 10px;
           box-shadow: rgb(38, 57, 77) 0px 20px 30px -10px;
        }
        .info-container img {
            width: 100%;
            border-radius: 10px 10px 0 0;
        }

        .cate , .author{
    border: none;
    outline: none;
    padding: 2px 5px ;
    font-size: 12px;
    font-weight: bold;
    border-radius: 30px;
    background-color: #333;
    color: white;
}

.author{
    color: #000000;
    background-color: #648f61;
}
.info-text {
          text-align: center;
          padding: 7px;
}



/* Google Font */

.footer {
    background-color: #2e3e28;
    text-align: center;
    padding: 20px 0;
    position: relative;
    overflow: hidden;
    margin-top: 5em;
    
}

.glow-top, .glow-bottom {
    position: absolute;
    left: 0;
    width: 100%;
    height: 3px;
    background: linear-gradient(to right, transparent, rgb(241, 150, 150), transparent);
    animation: glow 2s infinite alternate;
}

.glow-top {
    top: 0;
}
.glow-bottom {
    bottom: 0;
}

.logo {
    font-size: 24px;
    font-weight: 600;
    letter-spacing: 1px;
    margin-bottom: 10px;
}

.footer-links {
    list-style: none;
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-bottom: 15px;
}

.footer-links li {
    display: inline;
}

.logo-footer{
    border-radius: 50%;
    height: 70px;
    width: 70px;
}

.footer-links a {
    text-decoration: none;
    color: white;
    font-weight: bold;
    font-family: "Chakra Petch", sans-serif;
    font-size: 14px;
    transition: color 0.3s, transform 0.3s;
}

.footer-links a:hover {
    color: #8ad33b;
    transform: scale(1.1);
}

.social-icons {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-top: 10px;
   
}

.social-icons a {
    color: white;
    font-size: 1.2em !important;
    transition: transform 0.3s, color 0.3s;
}

.social-icons a:hover {
    transform: rotate(10deg) scale(1.2);
}

.face:hover{
    color: rgb(0, 108, 190);
}

.twit:hover{
    color: rgb(0, 174, 255);
}

.insta:hover{
    color: rgb(255, 38, 255);
}


.creater-footer{
    text-align: center;
    background-color: #2e3e28;
    padding: 0.7em 0;
    color: #989898;
}

.btn {
    padding: 12px 18px;
    background-color: #3e5a3c;
    color: white;
    text-decoration: none;
    border-radius: 5px;
    font-weight: bold;
}

.btn:hover{
    background-color: #2e3e28;
}

        
    </style>
</head>

<body>

    <!-- navbar -->

    <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid">
          <a class="navbar-brand" href="#"><img class="logoImg" src="../images/png-logo.png" alt=""></a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mx-auto mb-2 mb-lg-0">
              <li class="nav-item ps-5">
                <a class="nav-link abc active" aria-current="page" href="../../index.html">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link abc active" id="contact" aria-current="page" href="./contact.html">Contact Us</a>
              </li>
              <li class="nav-item">
                <a class="nav-link abc active " id="log" aria-current="page" href="./log.html">LogIn</a>
              </li>
            
              <!-- <i class="fa-solid fa-right-to-bracket"></i> -->
            </ul> 
            <li class="nav-item">
                <a  href="./search.html" class="user"><i class="fa-solid fa-magnifying-glass"></i></a>
              </li>
              <li class="nav-item">
                <a id="adduser" href="./profile.html" class="user"><i class="fa-solid fa-user"></i></a>
              </li>

              
            <form class="d-flex" role="search" >
              <a id="add" class="btn btn-outline-success" href="./addblog.html" >Write</a>
            </form>
          </div>
        </div>
      </nav>

   
      <div class="main-search">

        <h2 class="text-center blogsClass blog-none" style="color: black;  font-family:Berkshire Swash, serif;" >Search 
            <span style="color: #2e3e28;"> Here</span></h2>

    <!-- Search Bar -->
    <div class="custom-search-container">
        <div class="glass-div">
            <input type="text" id="custom-search" class="custom-search-bar" placeholder="Search blogs by topic or author...">
            <i class="fa-solid fa-magnifying-glass"></i>
    </div>
</div>
    <!-- Blog Container -->
    <div id="blog-container" class="blog-container">
        <!-- Blogs will be shown here -->



    </div>

</div>
    <footer class="footer">
        <div class="glow-top"></div> <!-- Red Glow Top Border -->
        <div class="container">
            <div class="logo"><img class=" logo-footer" src="../images/logo-blogs.jpeg" alt=""></div>
            <ul class="footer-links">
                <li><a href="../../index.html">Home</a></li>
                <li><a href="./food.html">Blogs</a></li>
                <li><a href="./contact.html">Contact Us</a></li>
            </ul>
            <div class="social-icons ">
                <a href="#"><i class="fab fa-facebook-f face"></i></a>
                <a href="#"><i class="fab fa-twitter twit"></i></a>
                <a href="#"><i class="fab fa-instagram insta"></i></a>
                <a href="#"><i class="fab fa-linkedin-in face"></i></a>
            </div>
        </div>
        <div class="glow-bottom"></div>   
    </footer>

  <div class="creater-footer">&copy; created by Fatima Abbasi</div>



  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

    <script type="module">
        import { db, collection, onSnapshot } from "../../config.js";

        let searchInput = document.getElementById("custom-search");
        let blogContainer = document.getElementById("blog-container");
        let allBlogs = []; // Store all blogs initially

        // Fetch blogs and store in allBlogs
        const getAllBlogs = () => {
            let cardRef = collection(db, "blogs");
            onSnapshot(cardRef, (querySnapshot) => {
                allBlogs = querySnapshot.docs.map((doc) => ({
                    id: doc.id,
                    ...doc.data(),
                }));
            });
        };

        // Function to render filtered blogs
        const renderBlogs = (blogs) => {
            blogContainer.innerHTML = ""; // Clear previous results
            if (blogs.length === 0) {
                blogContainer.innerHTML = `<p style="text-align:center;">No blogs found.</p>`;
                return;
            }
            blogs.forEach((blog) => {
                blogContainer.innerHTML += `
                    <div class="info-container">
                        <img src="${blog.image}" alt="${blog.topic}">
                        <div class="info-text">
                            <h3>${blog.topic}</h3>
                             <button class="author">${blog.author}</button>
                            <button class="cate">${blog.category}</button>
                            <p>${blog.blogcontent}</p>
                        </div>
                    </div>`;
            });
        };

        // Function to filter blogs based on search input
        const searchBlogs = (searchText) => {
            if (!searchText.trim()) {
                blogContainer.innerHTML = ""; // Keep empty if no input
                return;
            }
            let filteredBlogs = allBlogs.filter((blog) => 
                blog.topic.toLowerCase().includes(searchText.toLowerCase()) ||
                blog.author.toLowerCase().includes(searchText.toLowerCase())
            );
            renderBlogs(filteredBlogs);
        };

        // Event listener for search input
        searchInput.addEventListener("input", (e) => {
            searchBlogs(e.target.value);
        });

        // Fetch blogs on page load
        getAllBlogs();
    </script>


<script type="module" src="../js/onAuth.js"></script>
</body>
</html>